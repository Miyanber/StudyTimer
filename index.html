<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="index.css">
    <link rel="manifest" href="manifest.json" />
    <link rel="apple-touch-icon" href="favicon.png">
    <title>Study Timer</title>
    <script src="./script.js" defer></script>
    <script src="./contents/serviceWorker.js" crossorigin="anonymous"></script>
    <script>
        registerMyServiceWorker();
    </script>
</head>

<body>
    <header>
        <h1>Study Timer</h1>
        <span class="author">by Miyanber</span>
    </header>

    <div class="notification hidden" id="notification_to_break">
        <div class="message_container">
            <span class="message">勉強お疲れ様です。</span>
            <button type="button" id="start_break">休憩開始</button>
        </div>
    </div>
    <div class="hidden notification" id="notification_to_study">
        <div class="message_container">
            <span class="message">休憩できましたか？</span>
            <button type="button" id="start_study">勉強開始</button>
        </div>
    </div>

    <div id="popup" class="popup">
        <div class="popup__message">
            前回利用したタイマーがあります。 <br>再開しますか？
        </div>
        <div class="popup__buttons">
            <button type="button" id="popup_yes" class="save">再開</button>
            <button type="button" id="popup_no" class="save">削除</button>
        </div>
    </div>

    <div class="dateTime">
        <div id="date" class="date"></div>
        <div id="time" class="time"></div>
    </div>

    <div class="settings">
        <p><label for="studyTime">勉強時間(分)</label><input type="number" name="studyTime" id="studyTime" min="0"></p>
        <p><label for="break_time">休憩時間(分)</label><input type="number" name="break_time" id="break_time" min="0"></p>
    </div>

    <div class="timer" id="timer">
        <div class="circle"></div>
        <div class="circle_break"></div>
        <div class="timer_container">
            <div>
                残り時間 (分)
            </div>
            <div class="time__text">
                <span class="minutes"></span>
                <span class="seconds"></span>
            </div>
            <div class="timer_status">
                <div id="timer_status" class="timer_status__text">
                    読み込み中です...
                </div>
            </div>
        </div>
    </div>

    <div class="exam">
        <div class="exam__container">
            <div class="exam__container__settings">
                <label for="examTime">試験時間(分)</label>
                <input type="number" name="examTime" id="examTime" min="0">
                <button type="button" id="startExam">試験開始</button>
            </div>
            <div class="exam__container__schedule">
                <span id="examStartTime"></span> ～<span id="examEndTime"></span>
            </div>
        </div>
    </div>

    <div class="buttons">
        <button type="button" id="delete" class="save">タイマーをリセット</button>
        <button type="button" id="save" class="save">時間の設定を保存</button>
        <button type="button" id="openMusicSelector" class="save">アラーム音の設定</button>
    </div>

    <div class="musicSelector hidden" id="musicSelector">
        <div class="musicSelector__content">
            <div class="musicSelector__content__header">
                <h2>アラーム音の設定</h2>
                <div id="closeMusicSelector" class="screenCloseButton"></div>
            </div>
            <div class="musicSelector__content__list">
                <h3>現在のアラーム音</h3>
                <div class="musicSelector__content__list__item">
                    <div>勉強開始</div>
                    <div id="studyMusic_currentAudio">読み込み中です...</div>
                </div>
                <div class="musicSelector__content__list__item">
                    <div>休憩開始</div>
                    <div id="breakMusic_currentAudio">読み込み中です...</div>
                </div>
            </div>
            <div class="musicSelector__content__list">
                <h3>アラーム音を変更</h3>
                <div class="musicSelector__content__list__item">
                    <div>
                        <label for="studyMusic">勉強開始</label>
                    </div>
                    <input type="file" id="studyMusic" accept=".mp3, .m4a, .wav, .flac, mp4, audio/*">
                </div>
                <div class="musicSelector__content__list__item">
                    <div>
                        <label for="breakMusic">休憩開始</label>
                    </div>
                    <input type="file" id="breakMusic" accept=".mp3, .m4a, .wav, .flac, mp4, audio/*">
                </div>
            </div>
            <div class="musicSelector__content__footer">
                <button type="button" id="selectMusic" class="selectMusic">決定</button><br>
                <br>★変更には最大30秒程度かかることがあります。
                <br>更新が完了した場合、自動で選択画面が閉じます。
            </div>
        </div>
    </div>
</body>

</html>